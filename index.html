<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>HTML/CSS Test as per w3schools</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      background: #f0f2f5;
    }
p {
      text-align: left;
      font-weight: bold;
     color: #0066FF;
}
    #landing-page {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: #fff;
    }

    .landing-container {
      background: #f9f9f9;
      padding: 40px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      text-align: center;
      width: 90%;
      max-width: 500px;
    }

    .logo-right {
      text-align: right;
      margin-bottom: 10px;
    }

    .logo-left {
      text-align: left;
      margin-bottom: 10px;
    }

    .logo-left img {
      max-height: 60px;
    }

    .landing-container label {
      font-weight: bold;
      display: block;
      text-align: left;
      margin-top: 10px;
    }

    .landing-container input {
      width: 90%;
      padding: 10px;
      margin: 10px 0;
      font-size: 16px;
    }

    .landing-container button {
      background-color: #007bff;
      color: white;
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      cursor: pointer;
      border-radius: 5px;
    }

    .landing-container button:hover {
      background-color: #0056b3;
    }

    #test-content {
      padding: 20px;
    }

    .card {
      padding: 15px;
      margin-bottom: 20px;
      border: 1px solid #ccc;
      border-radius: 8px;
      background: #fff;
    }

    .editor-container {
      height: 300px;
      width: 100%;
      margin-bottom: 10px;
      border: 1px solid #ccc;
    }

    iframe {
      width: 100%;
      height: 200px;
      border: 1px solid #ccc;
      margin-bottom: 10px;
    }

    .timer {
      font-size: 20px;
      color: #d9534f;
      font-weight: bold;
      text-align: right;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>

  <!-- Landing Page -->
  <div id="landing-page">
    <div class="landing-container">
      <div class="logo-right">
        <img src="your-logo.png" alt="Your Logo"/>
      </div>
      <h3 style="text-align: center; text-decoration: underline;">
        <a href="https://www.patelgtech.com" target="_blank" style="text-decoration: underline;">
          www.patelgtech.com
        </a>
      </h3>
      <form id="startForm">
        <label for="name" style="color: green;">Name:*</label>
        <input type="text" id="name" name="name" required>
        <label for="email" style="color: green;">Email:*</label>
        <input type="email" id="email" name="email" required>
        <button type="submit" style="font-weight: bold;margin-top: 20px;">Click to Start</button>
      </form>
    </div>
<marquee id="landing-marquee" behavior="scroll" direction="left"
  style="position: fixed; bottom: 0; left: 0; width: 100%; background: #007bff; color: white; padding: 10px; font-weight: bold; z-index: 9999; margin: 0;">
  © 2025 PatelGTech. All rights reserved.            © 2025 PatelGTech Llp. All rights reserved.            © 2025 PatelGTech Llp. All rights reserved.            © 2025 PatelGTech Llp. All rights reserved.
</marquee>
  </div>

  <!-- Test Page -->
  <div id="test-content" style="display: none;">
    <div class="logo-left">
      <img src="your-logo.png" alt="Your Logo" />
    </div>
    <div class="timer" id="timer">⏱ Time Left: 45:00</div>
    <h1 style="color: green;">HTML/CSS Test as per w3Schools Standard</h1>
    <form id="testForm" method="POST">
      <label for="trainee_name"><strong>Trainee Name:</strong></label>
      <input type="text" id="trainee_name" name="trainee_name" readonly required><br><br>

      <div id="questions"></div>

      <button type="submit">✅ Submit All Answers</button>
    </form>
  </div>

  <!-- Monaco Editor Loader -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.34.1/min/vs/loader.min.js"></script>
  <script>
    const startForm = document.getElementById('startForm');
    const landingPage = document.getElementById('landing-page');
    const testContent = document.getElementById('test-content');
    const traineeNameInput = document.getElementById('trainee_name');
    const nameInput = document.getElementById('name');

    // Start test
startForm.addEventListener('submit', function(event) {
  event.preventDefault();
  const name = nameInput.value.trim();
  if (name !== "") {
    traineeNameInput.value = name;
    landingPage.style.display = 'none';
    testContent.style.display = 'block';
    document.getElementById("landing-marquee").style.display = "none"; // Hides the marquee
    startTimer(45 * 60); // 45 minutes
  }
});
    // Timer logic
    function startTimer(duration) {
      let timer = duration, minutes, seconds;
      const display = document.getElementById('timer');
      const countdown = setInterval(() => {
        minutes = String(Math.floor(timer / 60)).padStart(2, '0');
        seconds = String(timer % 60).padStart(2, '0');
        display.textContent = `⏱ Time Left: ${minutes}:${seconds}`;

        if (--timer < 0) {
          clearInterval(countdown);
          alert("⏰ Time is up! Submitting your test.");
          document.getElementById("testForm").submit();
        }
      }, 1000);
    }

    // Questions & Monaco Editor
    const questions = [
      "Create a basic HTML page with the title “My First Webpage” and a heading “Welcome to HTML Test”.",
      "Create an unordered list with “HTML”, “CSS”, “JavaScript”.",
      "Create a table with 2 columns (Name, Age) and 3 rows.",
      "Create a paragraph: “HTML stands for HyperText Markup Language. It is used to create web pages.”",
      "Create a hyperlink to https://www.w3schools.com that opens in a new tab.",
      "Add an image using URL: https://www.example.com/logo.png",
      "Create a form with Name, Email input, and a Submit button.",
      "Create a nested list: Fruits &gt; Apple, Banana; Vegetables &gt; Carrot, Potato.",
      "Use &lt;em&gt; and &lt;strong&gt; to style: “This is very important!”",
      "Create a &lt;div&gt; with id \"main-content\" and a paragraph inside.",
      "Write inline CSS to color &lt;h1&gt; blue.",
      "Use internal CSS to set body background to lightgray and paragraph font size to 16px.",
      "Create a .box class with 200x100px and green background.",
      "Use Flexbox to center a &lt;div&gt; vertically and horizontally.",
      "Write CSS to change link color to red on hover and remove underline."
    ];

    const editors = {};
    const container = document.getElementById("questions");

    questions.forEach((question, index) => {
      const qNum = index + 1;
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <h2>Question ${qNum}</h2>
        <p>${question}</p>
        <div id="editor${qNum}" class="editor-container"></div>
        <button type="button" onclick="runPreview(${qNum})">Run Preview</button>
        <iframe id="iframe${qNum}"></iframe>
        <textarea name="code${qNum}" id="code${qNum}" style="display: none;"></textarea>
      `;
      container.appendChild(card);
    });

    require.config({ paths: { vs: "https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.34.1/min/vs" }}); 
    require(["vs/editor/editor.main"], function () {
      for (let i = 1; i <= questions.length; i++) {
        const element = document.getElementById(`editor${i}`);
        editors[i] = monaco.editor.create(element, {
          value: "",
          language: "html",
          theme: "vs-dark",
          automaticLayout: true
        });
      }
    });

    window.runPreview = function(num) {
      const code = editors[num].getValue();
      document.getElementById(`iframe${num}`).srcdoc = code;
    };

    const testForm = document.getElementById("testForm");
    testForm.addEventListener("submit", function(event) {
      event.preventDefault();
      let allCode = '';
      for (let i = 1; i <= questions.length; i++) {
        const code = editors[i].getValue();
        allCode += `
          <div class="question">
            <h2>Question ${i}</h2>
            <pre>${code}</pre>
          </div>
        `;
        // Reset the editor content to blank after submission
        editors[i].setValue('');
      }

      const finalHtml = `
        <!DOCTYPE html>
        <html lang="en">
        <head>
          <meta charset="UTF-8" />
          <meta name="viewport" content="width=device-width, initial-scale=1.0" />
          <title>HTML/CSS Test Answers</title>
        </head>
        <body>
          <h1>Test Answers for ${traineeNameInput.value}</h1>
          ${allCode}
        </body>
        </html>
      `;

      const blob = new Blob([finalHtml], { type: 'text/html' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = `${traineeNameInput.value}_answers.html`;
      link.click();
    });

  // Warn user before closing or refreshing the page
  window.addEventListener('beforeunload', function (e) {
    // Only warn if test has started
    if (testContent.style.display === 'block') {
      const message = "You have started the test. Are you sure you want to leave? Your progress may be lost.";
      e.preventDefault();
      e.returnValue = message; // Most modern browsers will display this message
      return message; // For older browsers that still require returning the message
    }
  });


  </script>
</body>
</html>
